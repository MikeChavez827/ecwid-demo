import { str2ab } from "./helpers/str2ab";
import { b642ab } from "./helpers/b642ab";
import { decryptOrder } from "./helpers/decryptOrder";
import EncryptionHelper from "./helpers/EncryptionHelper";

async function main() {
  /*prep*/
  const bodyData = `u_rkJIf-J0kx92le91nVoLYI3hadZ5BcO3Ut8efEFgcpHnmtEemeBIsXRcRvNgRj8PLwKenH1xqi5sm3gv_g3ganaGnqVJDPNBKAso4qfO4eFd08xwfijT6_PyhVYr0CkiOnbvji2Yob1tPAu1EJi7fjvsGRMhxv-9MAwNzTu7BMcZiPJhV8W50fDw-lxof8UMSoYs1c0fGjvtDfB4-M8WvTlhESTeg-1LmEOG34AJcQlvg0R_UFW1M9FmoJNlxt8cEo5XyzG_bfwcDDUudk4a0MZOafG-YaOsWmhe1P6InSAAbahVlbZFJeYa42IDmG0T7-GTugHPCyCelCu-KEKnYpjnMwRWTU_Xi21lhh7McSWg3cZ8w-v07j3RAwkPxscI0fwmGtYF95iiB7Dlnz9bNBnbEhCljGIkFNnI7vJf22FpIu9VhTfSYjWuYT1XFHqynBtHZqs9rJACiC-6igyaTVswweOrisvE1xLBn_MmPTjn2umtd80-K7h2sPfqqzZw40sZzCSceP3jjy7_gzQ79RL0Vh5nGq57USm7qF_khODDF5S9Vv4jxFR1RvulE67ietIKUu5ywfJEYvexod4yOpLlRb6URtzqRUqHLYlNgFLu_5MOjtd4bPoi462sT5ozbD9M1SuiTEvhYJVYiuy_MxiKvNWyuOUkG4jcVp9Ju9frqAnnISRMc21Igx0KtTPp89gSbNLd-H-pPvmv6w-taZd_BewuCe1q65VQC_E27lUujv-nr4G0W8_wn_kgaR4b-U2Rc_6t0GQo_3cCl3GhvZ5erIaekhK1NrE3wXig7xZ4yMJuRC19OKhZE0XUUwWw9HpboH6_6he3222F-cPyVC-Idf6MDO7b2FJEX-T-X0Hxdk02qo9m57F32FUKKPoQQfzvt7Q8coHiSIAcwGFmsrXVxKdCMtvlZUhmbvLoRtGpN4hEMqVc3Zf40_f1sSCwlw8EnAhz_gegWIrgOFeGPSxSLIcLVLCiNxO4JypRToH0HkAF8GWyU1SlKdbHyN-ue0VTzN0ebbVgmqF445ua3xF7ywnsVoT-vm1Ujz2yzUNV0EVXJUo0CBYUuEZZY36ANHZS5UHcVnIOD1xyP4qAkmZ8WhHD2liXXsfwiMComQJDK-NBtEY_t1Zb7Uva8OMYqFI49v9bbTtz_nCADhTk_QJJA3egX1nL9ogoEyYnT10rNUCOBjNdHUoiq4K7pqxNEf1HoDOdMdbbWRifS-Sq2a6g9IB0SnSNygzOqTRRyWQT2nCmn21pjX9gsnjexdeH2cNkmYiavE1Ye_hW8bMcV90MVVyDgMcXZ_Iu1zOyWN1YgY_ceKj-UacDYIiRfvrTHeKIMfiFs79GdPo8ghC5SnoP5E3tRFkcUDmYF8namqI9xIDsTC3YXq1OtiVxstXD6Bpd1g68kMyUwVGPjzY_IXVIEQAQBjiCl38Aez4-emItHC-q_r9AkgJdAbEHz6zDGojp4i0Gxb-pjC2E4f7EhHMDnX2ewja_yk4CCBdXdH3yQ9pZXetnv1dAcE-VI7g4QFN55b2NzNQyUmrM4o_L3_durps9aUjZfk4MSZ91abhTs-6p0CheFJVScnbO0CyLaO51isPvknrqsuwkT3-8rwqUO2kYhf76xTgIauXzzIpKCL65gVurvxl2gyujlHtQ5Ktaw4k866IoBbTIBK8DfjIyhn5Cy3A2Xat1Hm4dvo5RGEq5R0PChbW83HxMdfxWLoDksDo3TgSbL0A2_8iEUuKBJNrrqBPcu9_pVV6wxJKYapRtA-s-vzJTpyOlltCXcvVBtPjYrwZH23iuaV8z_ebr3i-ABUrkumS-3MG57O5eD5wq2OTPD-tpYWRaroPeZMBxwEY3GplVAhW1TGrjTpiqm80W9hlGUxtv97R808mAAgbDwhGRYcCE20AZ7c3Jo9SoXnakB7plZdRoS5l5QuVXlzufD0ea99RB3EuYjCULoLXqlDdEa9KqonMUAn6snnGVl3zxwsoN7eVHJcmuzUUYK2teCxAhuVisJkS1MMToryh-5vGdNfbjKU-p0V32TehyFFVoIBgLlBRl4VzO2JjvEBzNE93fhXncfWAey62UcgFNampZKSPs9BCy3YEzsL_Nr6_v8Q4u1j6KXveNow8mfGisJdsAW3K71JrIO5jCQEXSS5F2XpCsnWRvdFFETtCtqGNS5n2YtyueVoLh0XwS2FNLKkHeimML-7u-E46W_W9N-yOGM6XFnya86kLy7J21jU3bziLSakOWK91_SVMJXKv7vM5DnS6N5pu-1FuzA24ChnizPSepPRA9DbIAVWMNbSZIF8pFhRpaeaTmK9TOGL2iIPbC9upFcph1QwyMLxfXwCn_Eqwzk9iVHy6WDMjyHg7_dagRNP4wxvlfNJFPLTsFB-IJNQtXBCRq_2Yk3_UBxzBmryBoF1RAZ9ZeREoqNz5vm2Zdkaqr_RDRcNfZQXJhJAaSDJ_Rey_K27ss6A3EJoGZGg1UEgkQ6-ea3_r7LIz_ev0lHvayyd9oOGhlv5SMn3Kv8CaPdcsDt1ZqiMH3lyE2rY11yhRfWEf5a45lEPlBRvqunb_TGgXT-omma9m-GKRlLJMuoi0eWWfyVYHsivIveitSJwrujpUEVkqYC38ivMrnA3fLTsKgWTWmUf_4UQLYELDcusD1kA9NjJttCwvE9TUOuu3ZgBZ3h-3u1VNJRjb_LrlZhzWcH1evL7j_oGzHB6F5X657Ud9mwwsQv7HaTwtCkTix1Yhxms3ksBUvXw1bpkbAZYM7pQlVwaXzdXTdazbBDzXgL82oAM3Us5nOo0UOIAR5palCSeGFSzUWCQspCR2woji1CstFIrUeqYfjb_p1OQ44O_ijiZ0fqQJE2b6i-yw2hcJNlj2UZ1ynNvEb46MloG4RnK3WSyAt7ryh6RDAb3dyD7S4Z3JjlElZELAn7CquJ3-bEnhfIPkzpgJIVFcFAvdZTFA45EeGvl7eSRd-E93ziLUPWr_nOaTdakdIHfHFcV8ZJAdjFPyKh0-II2zTWocbGb8OulDCjA2mSkKEOhS_UGyXOT2VKid8ZhBS7sbnz9_7hwUk5cmBtt37cAbcrSUQ`;
  const secret = `secret_gPvvg5hfkWmMbYyrkU7XSrkzY795BQhJ`;

  //   var paddingLength = 4 - (bodyData.length % 4);
  //   if (paddingLength !== 4) {
  //     bodyData + "=".repeat(paddingLength);
  //   }

  const originalBase64 = bodyData.replace(/-/g, "+").replace(/_/g, "/");
  const decodedBase64 = atob(originalBase64);
  const iv = str2ab(decodedBase64.substring(0, 16));
  const cipherOrder = b642ab(originalBase64);
  const keyData = str2ab(secret.substring(0, 16));

  var decrypted = await decryptOrder({ iv, cipherOrder, keyData });
  var decryptedStr = new TextDecoder().decode(decrypted);
}

main();
